"use strict";(self.webpackChunklayover=self.webpackChunklayover||[]).push([[615],{4615:($,U,c)=>{c.r(U),c.d(U,{LoginModule:()=>K});var p=c(9808),f=c(8555),d=c(3075),t=c(5e3),A=c(6624),E=c(2290),v=c(1223),V=c(6766);function z(i,s){1&i&&(t.TgZ(0,"mat-error",15),t._uU(1," E-Mail ID is required "),t.qZA())}function F(i,s){1&i&&(t.TgZ(0,"mat-error",15),t._uU(1," Enter valid E-Mail ID "),t.qZA())}function J(i,s){1&i&&(t.TgZ(0,"div",16)(1,"span",17),t._uU(2,"Loading..."),t.qZA()())}const q=function(){return{cursor:"not-allowed"}},Y=function(){return{cursor:"pointer"}};let B=(()=>{class i{constructor(r,o,e,a){this.router=r,this.fb=o,this.layoverService=e,this.toastr=a,document.title="Layoverconnect | Login"}ngOnInit(){this.loginForm=this.fb.group({email_id:["",[d.kI.required,d.kI.pattern(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$/)]]})}navigate(r){this.router.navigateByUrl(r)}onSubmit(){var r;if(this.loginForm.valid){let o={email:this.loginForm.get("email_id").value?null===(r=this.loginForm.get("email_id").value)||void 0===r?void 0:r.trim():null,otp:0};this.isLoading=!0,this.layoverService.getOtp(o).subscribe({next:e=>{!e.isError&&e.message?(this.isLoading=!1,this.toastr.success(e.message),setTimeout(()=>{this.router.navigate(["/auth/verify"],{queryParams:{email:this.loginForm.get("email_id").value}})},1e3)):(this.isLoading=!1,this.toastr.error(e.message))},error:e=>{this.toastr.error((null==e?void 0:e.error).message),this.isLoading=!1}})}}}return i.\u0275fac=function(r){return new(r||i)(t.Y36(f.F0),t.Y36(d.qu),t.Y36(A.y),t.Y36(E._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-login"]],decls:21,vars:9,consts:[[1,"px-0","container-fluid","position-relative","video-container","login-background"],[1,"d-block","w-100","main-card","pt-5"],[1,"sub-card"],[1,"background-card","p-3"],[3,"formGroup","ngSubmit"],[1,"ms-auto","me-3","p-3","login-card","card"],[1,"text-white","text-center","d-block","mt-2","login-text"],["for","",1,"mt-5","email-text"],["appearance","standard"],["type","email","matInput","","formControlName","email_id",3,"value"],["class","fw-bold mb-2",4,"ngIf"],["type","submit",1,"btn","get-password","text-white","btn-block","shadow-none","mt-1",3,"disabled","ngStyle"],["class","spinner-border spinner-border-sm ml-2","role","status",4,"ngIf"],[1,"me-2","text-center","mt-4","account-text"],[1,"text-warning","click-here",3,"click"],[1,"fw-bold","mb-2"],["role","status",1,"spinner-border","spinner-border-sm","ml-2"],[1,"visually-hidden"]],template:function(r,o){if(1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"form",4),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(5,"div",5)(6,"div",6),t._uU(7," Login "),t.qZA(),t.TgZ(8,"label",7),t._uU(9,"E-Mail ID"),t.qZA(),t.TgZ(10,"mat-form-field",8),t._UZ(11,"input",9),t.YNc(12,z,2,0,"mat-error",10),t.YNc(13,F,2,0,"mat-error",10),t.qZA(),t.TgZ(14,"button",11),t._uU(15," Get One Time Password "),t.YNc(16,J,3,0,"div",12),t.qZA(),t.TgZ(17,"p",13),t._uU(18," Don't have an Account? \xa0 "),t.TgZ(19,"a",14),t.NdJ("click",function(){return o.navigate("/")}),t._uU(20,"Click here"),t.qZA()()()()()()()),2&r){let e,a,l;t.xp6(4),t.Q6J("formGroup",o.loginForm),t.xp6(7),t.Q6J("value",null==o.loginForm||null==(e=o.loginForm.get("email_id"))||null==e.value?null:e.value.trim()),t.xp6(1),t.Q6J("ngIf",null==o.loginForm||null==(a=o.loginForm.get("email_id"))||null==a.errors?null:a.errors.required),t.xp6(1),t.Q6J("ngIf",(null==o.loginForm||null==(l=o.loginForm.get("email_id"))||null==l.errors?null:l.errors.email)||(null==o.loginForm||null==(l=o.loginForm.get("email_id"))||null==l.errors?null:l.errors.pattern)),t.xp6(1),t.Q6J("disabled",o.isLoading)("ngStyle",o.isLoading?t.DdM(7,q):t.DdM(8,Y)),t.xp6(2),t.Q6J("ngIf",o.isLoading)}},directives:[d._Y,d.JL,d.sg,v.KE,V.Nt,d.Fj,d.JJ,d.u,p.O5,v.TO,p.PC],styles:["[_nghost-%COMP%]  .mat-focused .mat-form-field-label{color:#d3d3d3}[_nghost-%COMP%]  .mat-form-field-appearance-standard .mat-form-field-invalid .mat-form-field-underline{background-color:red!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#d3d3d3}[_nghost-%COMP%]  .mat-form-field-ripple{background-color:#d3d3d3!important}[_nghost-%COMP%]  .mat-input-element{color:#fff!important}[_nghost-%COMP%]  .mat-form-field.mat-form-field-invalid .mat-form-field-ripple, .mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-ripple.mat-accent[_ngcontent-%COMP%]{background-color:#f44336!important}.click-here[_ngcontent-%COMP%]{cursor:pointer;letter-spacing:.05em;text-decoration:none;font-size:13px;font-weight:500!important}.click-here[_ngcontent-%COMP%]:hover{text-decoration:underline!important}.account-text[_ngcontent-%COMP%]{font-size:15px;color:#d3d3d3;font-weight:100!important;letter-spacing:.03em;margin-top:50px!important}.login-text[_ngcontent-%COMP%]{text-decoration:underline;font-weight:600;font-size:22px;letter-spacing:.03em}.email-text[_ngcontent-%COMP%]{font-size:12px!important;color:#d3d3d3!important}.main-card[_ngcontent-%COMP%]{position:absolute;top:50%;left:0%;transform:translate(-0%,-50%)}.sub-card[_ngcontent-%COMP%]{position:relative;right:50px}.get-password[_ngcontent-%COMP%]{background-color:#f8cf01;color:#fff;font-size:14px;border-radius:7px}.mat-error[_ngcontent-%COMP%]{font-size:11px}@media only screen and (max-width: 1150px){.account-text[_ngcontent-%COMP%]{font-size:13px}}.login-background[_ngcontent-%COMP%]{background-image:url(airplane-4885803_1920.0a2ef596ca542b11.jpg)!important;background-size:100%!important;background-repeat:no-repeat!important;background-position:center!important;height:100%!important;background:rgba(0,0,0,.5)}.mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{caret-color:#fff}"]}),i})();var D=c(4390);function N(i,s){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Please Enter OTP "),t.qZA())}function j(i,s){1&i&&(t.TgZ(0,"div",18)(1,"span",19),t._uU(2,"Loading..."),t.qZA()())}const Q=function(){return{length:6,allowNumbersOnly:!0}},W=function(){return{cursor:"not-allowed"}},G=function(){return{cursor:"pointer"}},R=[{path:"login",component:B},{path:"verify",component:(()=>{class i{constructor(r,o,e,a,l){this.router=r,this.fb=o,this.layoverService=e,this.toastr=a,this.activatedRoute=l,document.title="Layoverconnect | Login",l.queryParams.subscribe(u=>{this.currentEmail=null==u?void 0:u.email})}ngOnInit(){this.otpVerification=this.fb.group({OTPinput:this.fb.control("")})}onSubmit(r){if(r.currentVal){let o={email:this.currentEmail?this.currentEmail:null,otp:r.currentVal};this.isLoading=!0,this.layoverService.validateOtp(o).subscribe({next:e=>{var a,l,u,h,_,b,y,C,L,O,T,S,x,M,P;!e.isError&&e.message?(this.isLoading=!1,this.toastr.success("Login Successfull"),this.layoverService.localStorageSetItem("accessToken",null===(a=e.data)||void 0===a?void 0:a.accessToken),this.isLoading=!1,this.layoverService.localStorageSetItem("userType",e.data.userDetails.userType),(null===(u=null===(l=this.layoverService.getLocalStorageValue("userType"))||void 0===l?void 0:l.toLowerCase())||void 0===u?void 0:u.includes("admin"))?(this.isLoading=!1,this.router.navigateByUrl("/admin")):(null===(_=null===(h=this.layoverService.getLocalStorageValue("userType"))||void 0===h?void 0:h.toLowerCase())||void 0===_?void 0:_.includes("hotel"))?(this.layoverService.localStorageSetItem("hotelId",e.data.userDetails.objectId),this.isLoading=!1,this.router.navigateByUrl("/hotel")):(null===(y=null===(b=this.layoverService.getLocalStorageValue("userType"))||void 0===b?void 0:b.toLowerCase())||void 0===y?void 0:y.includes("airport"))?(this.layoverService.localStorageSetItem("companyId",e.data.userDetails.objectId),this.isLoading=!1,this.router.navigateByUrl("/airport")):(null===(L=null===(C=this.layoverService.getLocalStorageValue("userType"))||void 0===C?void 0:C.toLowerCase())||void 0===L?void 0:L.includes("externhandlingcompany"))?(this.layoverService.localStorageSetItem("companyId",e.data.userDetails.objectId),this.isLoading=!1,this.router.navigateByUrl("/external-handling-company")):(null===(T=null===(O=this.layoverService.getLocalStorageValue("userType"))||void 0===O?void 0:O.toLowerCase())||void 0===T?void 0:T.includes("airline"))?(this.layoverService.localStorageSetItem("companyId",e.data.userDetails.objectId),this.isLoading=!1,this.router.navigateByUrl("/airlines")):(null===(x=null===(S=this.layoverService.getLocalStorageValue("userType"))||void 0===S?void 0:S.toLowerCase())||void 0===x?void 0:x.includes("transportation"))?this.toastr.warning("This feature will come soon"):(null===(P=null===(M=this.layoverService.getLocalStorageValue("userType"))||void 0===M?void 0:M.toLowerCase())||void 0===P?void 0:P.includes("billinguser"))?(this.layoverService.localStorageSetItem("companyId",e.data.userDetails.objectId),this.isLoading=!1,this.layoverService.getAirportOrAirlineorExternalHandlingCompanyInfo().subscribe({next:n=>{var m,g,Z,k,w,I;!(null==n?void 0:n.isError)&&(null==n?void 0:n.data)&&((null==n?void 0:n.data)&&"airline"===(null===(g=null===(m=null==n?void 0:n.data)||void 0===m?void 0:m.userType)||void 0===g?void 0:g.toLowerCase())?this.router.navigateByUrl("/airlines"):(null==n?void 0:n.data)&&"airport"===(null===(k=null===(Z=null==n?void 0:n.data)||void 0===Z?void 0:Z.userType)||void 0===k?void 0:k.toLowerCase())?this.router.navigateByUrl("/airport"):(null==n?void 0:n.data)&&"externhandlingcompany"===(null===(I=null===(w=null==n?void 0:n.data)||void 0===w?void 0:w.userType)||void 0===I?void 0:I.toLowerCase())&&this.router.navigateByUrl("/external-handling-company"))},error:n=>{var m;let g=null==n?void 0:n.error;this.toastr.error((null==g?void 0:g.isError)?null===(m=null==n?void 0:n.error)||void 0===m?void 0:m.message:"Sorry, Something Went Wrong")}})):(this.isLoading=!1,this.toastr.error("You don't have access "))):(this.isLoading=!1,this.toastr.error(e.message))},error:e=>{let a=null==e?void 0:e.error;(null==a?void 0:a.isError)&&(this.isLoading=!1,this.toastr.error(null==a?void 0:a.message))}})}}resendOTP(){if(this.currentEmail){let r={email:this.currentEmail?this.currentEmail:null,otp:0};this.isLoading=!0,this.layoverService.getOtp(r).subscribe({next:o=>{!o.isError&&o.message?(this.isLoading=!1,this.toastr.success(o.message)):(this.isLoading=!1,this.toastr.error(o.message))},error:o=>{let e=null==o?void 0:o.error;e.isError?(this.isLoading=!1,this.toastr.error(null==e?void 0:e.message)):(this.isLoading=!1,this.toastr.error(e.message))}})}}fetchUser(){}}return i.\u0275fac=function(r){return new(r||i)(t.Y36(f.F0),t.Y36(d.qu),t.Y36(A.y),t.Y36(E._W),t.Y36(f.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-otp-verification"]],decls:25,vars:8,consts:[[1,"px-0","container-fluid","position-relative","video-container","login-background"],[1,"d-block","w-100","main-card"],[1,"sub-card"],[3,"ngSubmit"],[1,"bg-transparent","background-card1","p-3"],[1,"ms-auto","me-3","bg-transparent","p-3","login-card","card"],[1,"text-white","text-center","d-block","otp-verification","mt-2"],["for","",1,"mt-4","mb-0","enter-otp"],[1,"d-flex","justify-content-around","mb-3"],[3,"config"],["OTPinput",""],[4,"ngIf"],["type","submit",1,"btn","submit-btn","text-white","btn-block","shadow-none","mt-1",3,"ngStyle","disabled"],["class","spinner-border spinner-border-sm ml-2","role","status",4,"ngIf"],[1,"text-white","me-2","text-center","mt-2","resend-otp","cursor-pointer"],[1,"click-here",3,"click"],[1,"text-white","text-center","mt-3","mb-1",2,"font-size","10px"],[1,"text-white","text-center",2,"font-size","10px"],["role","status",1,"spinner-border","spinner-border-sm","ml-2"],[1,"visually-hidden"]],template:function(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const l=t.MAs(12);return o.onSubmit(l)}),t._UZ(4,"div",4),t.TgZ(5,"div",5)(6,"div",6),t._uU(7," OTP Verification "),t.qZA(),t.TgZ(8,"label",7),t._uU(9,"Enter OTP"),t.qZA(),t.TgZ(10,"div",8),t._UZ(11,"ng-otp-input",9,10),t.YNc(13,N,2,0,"mat-error",11),t.qZA(),t.TgZ(14,"button",12),t._uU(15," Submit "),t.YNc(16,j,3,0,"div",13),t.qZA(),t.TgZ(17,"p",14),t._uU(18," To resend OTP \xa0 "),t.TgZ(19,"a",15),t.NdJ("click",function(){return o.resendOTP()}),t._uU(20," Click here "),t.qZA()(),t.TgZ(21,"p",16),t._uU(22,"Please check your registered E-mail to get OTP"),t.qZA(),t.TgZ(23,"p",17),t._uU(24,"Note:- OTP will be expires in 3 min"),t.qZA()()()()()()}if(2&r){const e=t.MAs(12);let a;t.xp6(11),t.Q6J("config",t.DdM(5,Q)),t.xp6(2),t.Q6J("ngIf",null==o.otpVerification||null==(a=o.otpVerification.get("OTPinput"))||null==a.errors?null:a.errors.required),t.xp6(1),t.Q6J("ngStyle",o.isLoading?t.DdM(6,W):t.DdM(7,G))("disabled",6!==(null==e||null==e.currentVal?null:e.currentVal.length)||o.isLoading),t.xp6(2),t.Q6J("ngIf",o.isLoading)}},directives:[d._Y,d.JL,d.F,D.df,p.O5,v.TO,p.PC],styles:["[_nghost-%COMP%]  .mat-focused .mat-form-field-label{color:#fff!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#fff!important}[_nghost-%COMP%]  .mat-form-field-ripple{background-color:#fff!important}.main-card[_ngcontent-%COMP%]{position:absolute;top:50%;left:0%;transform:translate(-0%,-50%)}.sub-card[_ngcontent-%COMP%]{position:relative;right:50px}.submit-btn[_ngcontent-%COMP%]{font-size:14px;background-color:#f8cf01;letter-spacing:.03em;margin-left:25px;width:88%}.enter-otp[_ngcontent-%COMP%]{font-size:12px;color:#d3d3d3!important;margin-left:25px}.resend-otp[_ngcontent-%COMP%]{font-size:12px;font-weight:300;letter-spacing:.01em;margin-top:30px!important;margin-bottom:0}.click-here[_ngcontent-%COMP%]{cursor:pointer;letter-spacing:.05em;text-decoration:none;font-size:13px;font-weight:500!important;color:#f8cf01}.click-here[_ngcontent-%COMP%]:hover{text-decoration:underline!important}.otp-verification[_ngcontent-%COMP%]{text-decoration:underline;font-weight:600;font-size:22px;letter-spacing:.03em}.login-background[_ngcontent-%COMP%]{background-image:url(airplane-4885803_1920.0a2ef596ca542b11.jpg)!important;background-size:100%!important;background-repeat:no-repeat!important;background-position:center!important;height:100%!important;background:rgba(0,0,0,.5)}"]}),i})()}];let H=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.Bz.forChild(R)],f.Bz]}),i})();var X=c(9724);let K=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.ez,H,X.m]]}),i})()}}]);