"use strict";(self.webpackChunklayover=self.webpackChunklayover||[]).push([[592],{7488:(M,_,m)=>{m.d(_,{J:()=>D});var e=m(5e3),l=m(5936),g=m(3075),h=m(9808);class r{constructor(o){Object.assign(this,o)}static fromLocalString(o){const t=new Date(o),i=!isNaN(t.valueOf());return o&&i?new r({year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),timeZoneOffset:t.getTimezoneOffset()}):null}isInteger(o){return"number"==typeof o&&isFinite(o)&&Math.floor(o)===o}toString(){if(this.isInteger(this.year)&&this.isInteger(this.month)&&this.isInteger(this.day)){const o=this.year.toString().padStart(2,"0"),t=this.month.toString().padStart(2,"0"),i=this.day.toString().padStart(2,"0");this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.timeZoneOffset||(this.timeZoneOffset=(new Date).getTimezoneOffset());const n=this.hour.toString().padStart(2,"0"),s=this.minute.toString().padStart(2,"0"),u=this.second.toString().padStart(2,"0"),c=-this.timeZoneOffset,v=c>=0?"+":"-",d=function(k){const f=Math.floor(Math.abs(k));return(f<10?"0":"")+f};return`${d(o)}-${d(t)}-${d(i)}T${d(n)}:${d(s)}:${d(u)}${v}${d(c/60)}:${d(c%60)}`}return null}}var p=m(7876);const T=["timePickerContent"];function S(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"ngb-datepicker",8,9),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.MAs(2);return e.oxw(2).onDateChange(n,s)}),e.qZA(),e.TgZ(3,"div",10)(4,"button",11),e.NdJ("click",function(n){return e.CHM(t),e.oxw(2).toggleDateTimeState(n)}),e._UZ(5,"i",12),e.qZA()()()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.datetime)("minDate",t.minDate),e.xp6(3),e.Q6J("disabled",!(null!=t.datetime&&t.datetime.day))}}function C(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",10)(1,"button",13),e.NdJ("click",function(n){return e.CHM(t),e.oxw(2).toggleDateTimeState(n)}),e._UZ(2,"img",4),e.qZA(),e.TgZ(3,"div",14)(4,"ngb-timepicker",15,16),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).onTimeChange(n)}),e.qZA()()()}if(2&a){const t=e.oxw(2),i=e.MAs(7);e.xp6(1),e.Q6J("ngbPopover",i),e.xp6(3),e.Q6J("ngModel",t.datetime)("seconds",t.seconds)("hourStep",t.hourStep)("minuteStep",t.minuteStep)("secondStep",t.secondStep)}}function b(a,o){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,S,6,3,"div",6),e.YNc(2,C,6,6,"div",7),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.showTimePickerToggle),e.xp6(1),e.Q6J("ngIf",t.showTimePickerToggle)}}let D=(()=>{class a{constructor(t,i){this.config=t,this.inj=i,this.inputDatetimeFormat="yyyy/MM/dd H:mm:ss",this.hourStep=1,this.minuteStep=15,this.secondStep=30,this.seconds=!0,this.disabled=!1,this.showTimePickerToggle=!1,this.datetime=new r,this.firstTimeAssign=!0,this.onTouched=p.Z,this.onChange=p.Z,t.autoClose="outside",t.placement="auto"}ngOnChanges(){var t,i,n;if(this.min instanceof Date)this.minDate={year:null===(t=this.min)||void 0===t?void 0:t.getFullYear(),month:(null===(i=this.min)||void 0===i?void 0:i.getMonth())+1,day:null===(n=this.min)||void 0===n?void 0:n.getDate()},this.onTimeChange();else{let s=this.min.toString().split("T");this.minDate={year:+s[0].split("-")[0],month:+s[0].split("-")[1],day:+s[0].split("-")[2]},this.onTimeChange()}}ngOnInit(){this.ngControl=this.inj.get(g.a5)}ngAfterViewInit(){this.popover.hidden.subscribe(t=>{this.showTimePickerToggle=!1})}writeValue(t){t?(this.datetime=Object.assign(this.datetime,r.fromLocalString(t)),this.dateString=t,this.setDateStringModel()):this.datetime=new r}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}toggleDateTimeState(t){this.showTimePickerToggle=!this.showTimePickerToggle,t.stopPropagation()}setDisabledState(t){this.disabled=t}onInputChange(t){const i=t.target.value,n=r.fromLocalString(i);n?(this.datetime=n,this.setDateStringModel()):""===(null==i?void 0:i.trim())?(this.datetime=new r,this.dateString="",this.onChange(this.dateString)):this.onChange(i)}onDateChange(t,i){const n=new r(t);if(!n)return void(this.dateString=this.dateString);this.datetime||(this.datetime=n),this.datetime.year=n.year,this.datetime.month=n.month,this.datetime.day=n.day;const s=new Date(this.datetime.toString());this.datetime.timeZoneOffset!==s.getTimezoneOffset()&&(this.datetime.timeZoneOffset=s.getTimezoneOffset()),this.setDateStringModel()}onTimeChange(t){this.datetime.hour=(null==t?void 0:t.hour)?null==t?void 0:t.hour:this.datetime.hour,this.datetime.minute=(null==t?void 0:t.minute)?null==t?void 0:t.minute:this.datetime.minute,this.datetime.second=(null==t?void 0:t.second)?null==t?void 0:t.second:this.datetime.second,this.setDateStringModel()}setDateStringModel(){this.dateString=this.datetime.toString(),this.firstTimeAssign?null!==this.dateString&&(this.firstTimeAssign=!1):this.onChange(this.dateString)}inputBlur(t){this.onTouched()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(l.AX),e.Y36(e.zs3))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-date-time-picker"]],viewQuery:function(t,i){if(1&t&&(e.Gf(T,5),e.Gf(l.o8,7)),2&t){let n;e.iGM(n=e.CRH())&&(i.timePickerContent=n.first),e.iGM(n=e.CRH())&&(i.popover=n.first)}},inputs:{min:"min",dateString:"dateString",inputDatetimeFormat:"inputDatetimeFormat",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",seconds:"seconds",disabled:"disabled"},features:[e._Bn([h.uU,{provide:g.JU,useExisting:(0,e.Gpc)(()=>a),multi:!0}]),e.TTD],decls:8,vars:8,consts:[[1,"input-group","mr-2"],["placeholder","YYYY/MM/DD HH:MM:SS","readonly","",1,"form-control","px-1","border-0","shadow-none",3,"ngClass","ngModel","disabled","blur","change"],[1,"input-group-append","border-0","d-grid","gap-2"],["type","button",1,"btn","border-0","shadow-none",3,"ngbPopover","disabled"],["src","/assets/images/calender.png","width","22","height","22","alt",""],["calendarContent",""],[4,"ngIf"],["class","d-grid gap-2",4,"ngIf"],["id","dp","name","datepicker",3,"ngModel","minDate","ngModelChange"],["dp",""],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-block","shadow-none",3,"disabled","ngbPopover","click"],[1,"fa","fa-clock"],["type","button",1,"btn","btn-block","shadow-none",3,"ngbPopover","click"],[1,"mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"],["tp",""]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("blur",function(s){return i.inputBlur(s)})("change",function(s){return i.onInputChange(s)}),e.ALo(2,"date"),e.qZA(),e.TgZ(3,"div",2)(4,"button",3),e._UZ(5,"img",4),e.qZA()()(),e.YNc(6,b,3,2,"ng-template",null,5,e.W1O)),2&t){const n=e.MAs(7);e.xp6(1),e.Q6J("ngClass",null!=i.ngControl&&i.ngControl.valid?"ng-valid":"ng-invalid")("ngModel",e.xi3(2,5,i.dateString,i.inputDatetimeFormat))("disabled",i.disabled),e.xp6(3),e.Q6J("ngbPopover",n)("disabled",i.disabled)}},directives:[g.Fj,h.mk,g.JJ,g.On,l.o8,h.O5,l.VL,l.Pm],pipes:[h.uU],styles:["input[_ngcontent-%COMP%]{font-size:13px}.form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%]{background-color:#fff!important}[_nghost-%COMP%]  .btn-link{color:#0a62b9!important;box-shadow:none!important}"]}),a})()}}]);